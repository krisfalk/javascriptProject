var dataObject = { 
	"272822514" : { 
	  "firstName": "Billy",
	  "lastName": "Bob",
	  "gender": "male",
	  "dob": "1/18/1949",
	  "height": 71,
	  "weight": 175,
	  "eyeColor": "brown",
	  "occupation": "programmer",
	  "parents": [],
	  "currentSpouse": 401222887 
	},
	"401222887" : { 
	  "firstName": "Uma",
	  "lastName": "Bob",
	  "gender": "female",
	  "dob": "4/1/1947",
	  "height": 65,
	  "weight": 162,
	  "eyeColor": "brown",
	  "occupation": "assistant",
	  "parents": [],
	  "currentSpouse": 272822514 
	},
	"409574486" : { 
	  "firstName": "Michael",
	  "lastName": "Walkens",
	  "gender": "male",
	  "dob": "5/9/1951",
	  "height": 76,
	  "weight": 250,
	  "eyeColor": "brown",
	  "occupation": "landscaper",
	  "parents": [],
	  "currentSpouse": 260451248 
	},
	"260451248" : {
	  "firstName": "Jon",
	  "lastName": "Walkens",
	  "gender": "male",
	  "dob": "9/6/1945",
	  "height": 62,
	  "weight": 115,
	  "eyeColor": "brown",
	  "occupation": "assistant",
	  "parents": [],
	  "currentSpouse": 409574486 
	},
	"629807187" : {
	  "firstName": "Jack",
	  "lastName": "Pafoy",
	  "gender": "male",
	  "dob": "3/16/1938",
	  "height": 70,
	  "weight": 207,
	  "eyeColor": "black",
	  "occupation": "nurse",
	  "parents": [],
	  "currentSpouse": 464142841 
	},
	"464142841" : {
	  "firstName": "Jen",
	  "lastName": "Pafoy",
	  "gender": "female",
	  "dob": "4/10/1940",
	  "height": 72,
	  "weight": 256,
	  "eyeColor": "black",
	  "occupation": "student",
	  "parents": [],
	  "currentSpouse": 629807187 
	},
	"982411429" : {
	  "firstName": "Mister",
	  "lastName": "Potatoo",
	  "gender": "male",
	  "dob": "12/18/1952",
	  "height": 66,
	  "weight": 170,
	  "eyeColor": "hazel",
	  "occupation": "architect",
	  "parents": [],
	  "currentSpouse": 595767575 
	},
	"595767575" : {
	  "firstName": "Missuz",
	  "lastName": "Potatoo",
	  "gender": "female",
	  "dob": "10/28/1948",
	  "height": 59,
	  "weight": 137,
	  "eyeColor": "blue",
	  "occupation": "architect",
	  "parents": [],
	  "currentSpouse": 982411429 
	},
	"693243224" : {
	  "firstName": "Joy",
	  "lastName": "Madden",
	  "gender": "female",
	  "dob": "4/20/1939",
	  "height": 69,
	  "weight": 199,
	  "eyeColor": "hazel",
	  "occupation": "doctor",
	  "parents": [],
	  "currentSpouse": 693243224 
	},
	"888201200" : {
	  "firstName": "Mader",
	  "lastName": "Madden",
	  "gender": "male",
	  "dob": "5/6/1937",
	  "height": 76,
	  "weight": 205,
	  "eyeColor": "black",
	  "occupation": "landscaper",
	  "parents": [],
	  "currentSpouse": 888201200 
	},
	"878013758" : {
	  "firstName": "Jill",
	  "lastName": "Pafoy",
	  "gender": "Bob",
	  "dob": "2/8/1972",
	  "height": 74,
	  "weight": 118,
	  "eyeColor": "brown",
	  "occupation": "programmer",
	  "parents": [401222887,401222887],
	  "currentSpouse": 294874671 
	},
	"951747547" : {
	  "firstName": "Ralph",
	  "lastName": "Bob",
	  "gender": "male",
	  "dob": "12/23/1969",
	  "height": 66,
	  "weight": 179,
	  "eyeColor": "blue",
	  "occupation": "nurse",
	  "parents": [401222887,401222887],
	  "currentSpouse": 159819275 
	},
	"159819275" : {
	  "firstName": "Jasmine",
	  "lastName": "Bob",
	  "gender": "female",
	  "dob": "12/18/1969",
	  "height": 58,
	  "weight": 156,
	  "eyeColor": "blue",
	  "occupation": "assistant",
	  "parents": [409574486,260451248],
	  "currentSpouse": 951747547 
	},
	"348457184" : {
	  "firstName": "Annie",
	  "lastName": "Pafoy",
	  "gender": "female",
	  "dob": "11/4/1970",
	  "height": 62,
	  "weight": 235,
	  "eyeColor": "hazel",
	  "occupation": "landscaper",
	  "parents": [629807187,464142841],
	  "currentSpouse": null 
	},
	"294874671" : {
	  "firstName": "Dave",
	  "lastName": "Pafoy",
	  "gender": "male",
	  "dob": "8/5/1967",
	  "height": 61,
	  "weight": 112,
	  "eyeColor": "green",
	  "occupation": "doctor",
	  "parents": [629807187,464142841],
	  "currentSpouse": 878013758 
	},
	"931247228" : {
	  "firstName": "Amii",
	  "lastName": "Pafoy",
	  "gender": "female",
	  "dob": "3/13/1963",
	  "height": 74,
	  "weight": 184,
	  "eyeColor": "brown",
	  "occupation": "landscaper",
	  "parents": [629807187,464142841],
	  "currentSpouse": null 
	},
	"822843554" : {
	  "firstName": "Regina",
	  "lastName": "Madden",
	  "gender": "female",
	  "dob": "7/26/1959",
	  "height": 71,
	  "weight": 249,
	  "eyeColor": "brown",
	  "occupation": "nurse",
	  "parents": [693243224, 888201200],
	  "currentSpouse": null 
	},
	"819168108" : {
	  "firstName": "Hana",
	  "lastName": "Madden",
	  "gender": "female",
	  "dob": "10/7/1953",
	  "height": 70,
	  "weight": 187,
	  "eyeColor": "brown",
	  "occupation": "politician",
	  "parents": [693243224, 888201200],
	  "currentSpouse": null 
	},
	"969837479" : {
	  "firstName": "Eloise",
	  "lastName": "Madden",
	  "gender": "female",
	  "dob": "12/11/1961",
	  "height": 63,
	  "weight": 241,
	  "eyeColor": "brown",
	  "occupation": "assistant",
	  "parents": [693243224, 888201200],
	  "currentSpouse": null 
	},
	"313207561" : {
	  "firstName": "Mattias",
	  "lastName": "Madden",
	  "gender": "male",
	  "dob": "2/19/1966",
	  "height": 70,
	  "weight": 110,
	  "eyeColor": "blue",
	  "occupation": "assistant",
	  "parents": [693243224, 888201200],
	  "currentSpouse": 313997561 
	},
	"313997561" : {
	  "firstName": "Ellen",
	  "lastName": "Madden",
	  "gender": "female",
	  "dob": "2/19/1970",
	  "height": 67,
	  "weight": 100,
	  "eyeColor": "blue",
	  "occupation": "doctor",
	  "parents": [],
	  "currentSpouse": 313207561 
	},
	"313998000" : {
	  "firstName": "Joey",
	  "lastName": "Madden",
	  "gender": "female",
	  "dob": "2/02/1987",
	  "height": 67,
	  "weight": 100,
	  "eyeColor": "blue",
	  "occupation": "doctor",
	  "parents": [313207561,313997561],
	  "currentSpouse": null 
	}
};

/*  Remove this from your final submission
function printAllToConsole(dataObj){
	for (var key in dataObj) {
		if (dataObj.hasOwnProperty(key)) {
			console.log(key + " -> " + JSON.stringify(dataObj[key]));
		}
	}
}
printAllToConsole(dataObject);
*/
  	var personList = [];
  	var traitsToSearch = [];
  	var immediateFamily = [];

  	askUser();


  	function askUser(){
  		var result = prompt("What do you want to do? Type one of following to search:\r\n'name'\r\n'descendants'\r\n'next of kin'\r\n'trait'\r\n'traits'\r\n'age'\r\n'family'\r\nType 'exit' to end.");
  		switch(result){
  			case "name":
  				var person = promptForName();
  				errorCheck(person);
  				displayPerson(dataObject[person], "Match: \r\n");
  				break;
  			case "descendants":
  				var person = promptForName();
  				errorCheck(person);
  				personList = [];
  				getDescendants(person);
  				displayListOfPersons(personList, "Descendants: ");
  				break;
  			case "next of kin":
  				var person = promptForName();
  				errorCheck(person);
  				personList = [];
  				getDescendants(person);
  				displayPerson(dataObject[getOldestFromArray(personList)], "Next of kin:\r\n");
  				break;
  			case "trait":
  				var typeSearch = prompt("What trait do you want to search by? type: 'gender, height, weight, eye color, or occupation'");
  				var input = prompt(typeSearch);
  				personList = [];
  				if(typeSearch == "eye color")
  					searchByTrait("eyeColor", input);
  				else searchByTrait(typeSearch, input);
  				displayListOfPersons(personList, "Matches:\r\n");
  				break;
  			case "traits":
  				traitsToSearch = [];
  				traitsToSearch.push(prompt("Search for male or female?"));
  				traitsToSearch.push(prompt("Height: "));
  				traitsToSearch.push(prompt("Weight: "));
  				traitsToSearch.push(prompt("Eye Color: "));
  				traitsToSearch.push(prompt("Occupation: "));
  				displayPerson(dataObject[searchFiveTrait(traitsToSearch)], "Match:\r\n");
  				break;
  			case "age":
  				personList = [];
  				searchByAge(prompt("Enter age:"));
  				displayListOfPersons(personList, "Matches: ");
  				break;
  			case "family":
  				personList = [];
  				var person = promptForName();
  				errorCheck(person);
  				getImmediateFamily(person);
  				displayListOfPersons(personList, "Immediate family: ");
  				break;
  			case "exit":
  				exitWebPage();
  				break;
  			default:
  			    errorCheck(undefined);
  			    break;
  		}
  		askUser();
  	}
  	function exitWebpage(){
  		window.close();
  	}
  	function promptForName(){
  		return getPersonByName(prompt("Enter person's first name: "),prompt("Enter person's last name: "));
  	}
  	function errorCheck(check){
  		try{
  			if(check == undefined)
  				throw('Error');
  		}catch(error){
  			console.log(error.message);
  			console.log('No Data Found! Reload webpage.');
  		}
  		return check;
  	}
  	function getOldestFromArray(listOfPeople){
  		var OldestPerson = undefined;
  		for (var i = 0; i < listOfPeople.length; i++) {
  			var currentDOB = dataObject[listOfPeople[i]].dob.split("/");
  			if(OldestPerson != undefined){
  				var previousDOB = dataObject[OldestPerson].dob.split("/");
  			}
  			if(OldestPerson == undefined){
  				OldestPerson = listOfPeople[i];
  			} else if(currentDOB[2] < previousDOB[2]){
  				OldestPerson = listOfPeople[i];
  			}
  		}
  		return OldestPerson;
  	}
  	function getImmediateFamily(person){
  		getSpouse(person);
  		getDescendants(person);
  	}
  	function getSpouse(person){
  		searchByTrait("currentSpouse", person);
  	}
  	function displayListOfPersons(listOfPeople, strType){
  		for(var i = 0; i < listOfPeople.length; i++){
  			displayPerson(dataObject[listOfPeople[i]], (strType + (i + 1) + ":\r\n"))
  		}
  	}
  	function getDescendants(person){
  		for (var item in dataObject) {
  			if(dataObject[item].parents.length != 0){
  				if(dataObject[item].parents[0] == person || dataObject[item].parents[1] == person){
  					personList.push(item);
  				}
  			}
  		}
  	}
  	function displayPerson(person, displayString){
  		var buildPerson = "" + displayString;
  		for(var item in person){
  			buildPerson = buildPerson + item + ": " + person[item] + "\r\n";
  		}
  		alert(buildPerson);
  	}
  	function getPersonByName(firstNameSearch, lastNameSearch){
  		for (var item in dataObject) {
  			if (dataObject.hasOwnProperty(item)) {
				if(dataObject[item].firstName == firstNameSearch && dataObject[item].lastName == lastNameSearch){
					return item;
				}
			}
  		}
  	}
  	function searchFiveTrait(listOfTraits){
  		for(var item in dataObject){
  			if(dataObject[item].gender == listOfTraits[0] && dataObject[item].height == listOfTraits[1] && 
  				dataObject[item].weight == listOfTraits[2] && dataObject[item].eyeColor == listOfTraits[3] && 
  				dataObject[item].occupation == listOfTraits[4])
  				return item;
  		}
  	}
  	function searchByAge(ageSearch){
  		for(var item in dataObject){
  			if(getAge(dataObject[item].dob) == parseInt(ageSearch))
  				personList.push(item);
  		}
  	}
  	function getAge(birthDate) {

    	var today = new Date();
    	var nowyear = today.getFullYear();
    	var nowmonth = today.getMonth();
    	var nowday = today.getDate();

    	var currentDoB = birthDate.split("/");
    	var birthyear = currentDoB[2];
    	var birthmonth = currentDoB[0];
    	var birthday = currentDoB[1];

    	var age = nowyear - birthyear;
    	var age_month = nowmonth - birthmonth;
    	var age_day = nowday - birthday;
   
    	if(age_month < 0 || (age_month == 0 && age_day < 0)) {
            age = age -1;
        }
        age = parseInt(age);
    	return age;
	}
  	function searchByTrait(traitType, userInput){
  		for(var item in dataObject){
  			if(dataObject[item][traitType] == userInput)
  				personList.push(item);
  		}
  	}
  	/*function initSearch(){
	alert("Hello World");

	// get all the information you need to run the search
	var yourName = prompt("Who do you want to search for?");

	// then pass that info to the respective function.
	var result = getPersonInfo("J", "T")

	// once the search is done, pass the results to the responder function
	responder(result);
}

function responder(results){
	// results may be a list of strings, an object, or a single string. 
	alert(results);
}

function getPersonInfo(firstname, lastname){
		
}

function getFamily(){
	// return list of names of immediate family members
}

// there will be much more here, and some of the code above will certainly change

initSearch();*/
//window.close(); // exit window as the end of the session -- you may remove this
